(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{33:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(23),o=n.n(r),s=n(11),i=(n(33),n(27)),l=n(2),u=n(3),j=c.a.createContext(),d=n(8),p=n(28),b=(n(34),n(0)),m=function(e){var t=e.component,n=Object(p.a)(e,["component"]);return Object(b.jsx)(u.b,{children:n.loggedIn?Object(b.jsx)(t,Object(d.a)({},n)):Object(b.jsx)(u.a,{to:"/signin"})})},h=n(10);var f=function(e){var t=e.title,n=e.children;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("section",{children:[Object(b.jsx)("h2",{className:"form__title form__title_theme_page",children:t}),Object(b.jsx)("form",{className:"form form_theme_page",children:n})]})})},O="https://auth.nomoreparties.co";var _=function(e){var t=e.size,n=e.isOpened,a=(e.onClose,e.infotooltipStatus),c=e.infotooltipMessage,r=e.onInfotooltipClose,o=n?" popup_opened":"",s=a?"sucess":"error";return Object(b.jsx)("section",{className:"popup popup_theme_neutral "+o,children:Object(b.jsxs)("div",{className:"popup__container popup__"+t,children:[Object(b.jsx)("div",{className:"infotooltip infotooltip_type_"+s,children:Object(b.jsx)("h3",{className:"infotooltip__message",children:c})}),Object(b.jsx)("button",{onClick:r,"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e",type:"button",className:"button button_close"})]})})};var x=function(e){var t=e.onLogin,n=e.infotooltipMessage,c=e.infotooltipStatus,r=e.isInfotooltipOpened,o=e.onInfotooltipClose,s=Object(a.useState)({email:"",password:""}),i=Object(l.a)(s,2),u=i[0],j=i[1];function p(e){var t=e.target,n=t.name,a=t.value;j(Object(d.a)(Object(d.a)({},u),{},Object(h.a)({},n,a)))}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(f,{title:"\u0412\u0445\u043e\u0434",children:[Object(b.jsxs)("fieldset",{className:"form__set",children:[Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{placeholder:"Email",type:"email",name:"email",className:"form__input form__input_theme_page",onChange:p,required:!0}),Object(b.jsx)("span",{className:"form__error",children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]}),Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password",className:"form__input form__input_theme_page",required:!0,onChange:p}),Object(b.jsx)("span",{className:"form__error",children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]})]}),Object(b.jsx)("button",{"aria-label":"\u0412\u043e\u0439\u0442\u0438",type:"submit",className:"button button_login",onClick:function(e){e.preventDefault();var n=u.email,a=u.password;t(n,a).then((function(e){})).catch((function(e){}))},children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(b.jsx)(_,{size:"size_l",isOpened:r,onClose:!1,infotooltipStatus:c,infotooltipMessage:n,onInfotooltipClose:o})]})};var v=function(e){var t=e.onRegister,n=e.infotooltipMessage,c=e.infotooltipStatus,r=e.isInfotooltipOpened,o=e.onInfotooltipClose,s=Object(a.useState)({email:"",password:""}),i=Object(l.a)(s,2),j=i[0],p=i[1],m=Object(a.useState)(""),O=Object(l.a)(m,2),x=(O[0],O[1],Object(a.useState)(!1)),v=Object(l.a)(x,2);function g(e){var t=e.target,n=t.name,a=t.value;p(Object(d.a)(Object(d.a)({},j),{},Object(h.a)({},n,a)))}return v[0],v[1],Object(u.g)(),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(f,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",children:[Object(b.jsxs)("fieldset",{className:"form__set",children:[Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{placeholder:"Email",type:"email",name:"email",className:"form__input form__input_theme_page",required:!0,onChange:g}),Object(b.jsx)("span",{className:"form__error",children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]}),Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password",className:"form__input form__input_theme_page",required:!0,onChange:g}),Object(b.jsx)("span",{className:"form__error",children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]})]}),Object(b.jsx)("button",{"aria-label":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",type:"submit",className:"button button_register",onClick:function(e){e.preventDefault();var n=j.email,a=j.password;t(n,a).then((function(e){})).catch((function(e){}))},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(b.jsxs)("p",{className:"form__note",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(b.jsx)("a",{href:"/signin",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}),Object(b.jsx)(_,{size:"size_l",isOpened:r,onClose:!1,infotooltipStatus:c,infotooltipMessage:n,onInfotooltipClose:o})]})},g=n.p+"static/media/logo-mesto.8e568801.svg";var N=function(e){var t=e.loggedIn,n=e.location,a=e.email,c=e.onSignout;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("header",{className:"header",children:[Object(b.jsx)("a",{href:"./",children:Object(b.jsx)("img",{src:g,className:"logo",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f Mesto Russia"})}),Object(b.jsxs)("div",{className:"navbar",children:[t&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{className:"navbar__user",children:a}),Object(b.jsx)("a",{className:"navbar__link",href:"#",onClick:c,children:"\u0412\u044b\u0439\u0442\u0438"})]}),"/signup"===n&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("a",{className:"navbar__link",href:"/signin",children:"\u0412\u043e\u0439\u0442\u0438"})}),"/signin"===n&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("a",{className:"navbar__link",href:"/signup",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})]})})};var C=function(){var e=(new Date).getFullYear();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("footer",{className:"footer",children:Object(b.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e," Mesto Russia"]})})})};var k=function(e){var t=e.onCardLike,n=e.onCardClick,c=e.onCardDelete,r=e.card,o=Object(a.useContext)(j),s=r.likes.length,i=r.owner._id===o._id,l="button button_delete ".concat(i?"":"button_visibility_hidden"),u=r.likes.some((function(e){return e._id===o._id})),d="button button_like ".concat(u?"button_like-isset":"");return Object(b.jsxs)("li",{className:"card-item",children:[Object(b.jsx)("img",{src:r.link,className:"card-item__pic",alt:r.name,onClick:function(){n(r)}}),Object(b.jsxs)("div",{className:"card-item__footer",children:[Object(b.jsx)("h2",{className:"card-item__title",children:r.name}),Object(b.jsxs)("div",{className:"card-item__like-area",children:[Object(b.jsx)("button",{"aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",type:"button",className:d,onClick:function(){t(r)}}),Object(b.jsx)("p",{className:"card-item__like-count",children:s})]})]}),Object(b.jsx)("button",{onClick:function(){c(r)},"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",type:"button",className:l})]})};var y=function(e){var t=e.onEditAvatar,n=e.onAddPlace,c=e.onEditProfile,r=e.onCardClick,o=e.cards,s=e.onCardLike,i=e.onCardDelete,l=Object(a.useContext)(j);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("main",{children:[Object(b.jsxs)("section",{className:"profile",children:[Object(b.jsx)("div",{className:"profile__avatar-container js-edit-avatar",onClick:t,children:Object(b.jsx)("img",{className:"profile__avatar",src:l.avatar,alt:l.name})}),Object(b.jsxs)("div",{className:"profile__person-info",children:[Object(b.jsx)("h1",{className:"profile__person",id:"profileName",children:l.name}),Object(b.jsx)("button",{"aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"button",className:"button button_edit",id:"editButton",onClick:c}),Object(b.jsx)("p",{className:"profile__job",id:"profileJob",children:l.about})]}),Object(b.jsx)("button",{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"button button_add",type:"button",onClick:n})]}),Object(b.jsx)("section",{children:Object(b.jsx)("ul",{className:"cards",children:o.map((function(e){return Object(b.jsx)(k,{onCardClick:r,card:e,onCardLike:s,onCardDelete:i},e._id)}))})})]})})};var S=function(e){var t=e.size,n=e.title,a=e.formName,c=e.popupName,r=e.isOpen,o=e.onClose,s=e.onSubmit,i=e.children,l=r?" popup_opened":"";return Object(b.jsx)("section",{className:"popup popup_theme_neutral "+c+l,children:Object(b.jsxs)("div",{className:"popup__container popup__"+t,children:[Object(b.jsxs)("form",{onSubmit:s,className:"form "+a,noValidate:!0,children:[Object(b.jsx)("h2",{className:"form__title",children:n}),i,Object(b.jsx)("button",{"aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",type:"submit",className:"button button_save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(b.jsx)("button",{onClick:o,"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e",type:"button",className:"button button_close"})]})})};var E=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,r=Object(a.useRef)();return Object(b.jsx)(S,{size:"size_m",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",popupName:"js-popup-avatar",formName:"js-form-avatar",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({avatar:r.current.value})},children:Object(b.jsx)("fieldset",{className:"form__set",children:Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",type:"url",name:"link",ref:r,className:"form__input form__avatar-url",id:"js-avatar-url",required:!0}),Object(b.jsx)("span",{className:"form__error",id:"js-avatar-url-error",children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]})})})};var P=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,r=Object(a.useState)(""),o=Object(l.a)(r,2),s=o[0],i=o[1],u=Object(a.useState)(""),d=Object(l.a)(u,2),p=d[0],m=d[1],h=Object(a.useContext)(j);return Object(a.useEffect)((function(){i(h.name||""),m(h.about||"")}),[h]),Object(b.jsx)(S,{size:"size_l",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",popupName:"js-popup-profile",formName:"js-form-profile",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({name:s,about:p})},children:Object(b.jsxs)("fieldset",{className:"form__set",children:[Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{placeholder:"\u0418\u043c\u044f",type:"text",className:"form__input form__profile-name",name:"name",value:s,id:"js-profile-name",required:!0,minLength:"2",maxLength:"40",onChange:function(e){i(e.target.value)}}),Object(b.jsx)("span",{className:"form__error",id:"js-profile-name-error",children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]}),Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{placeholder:"\u041e \u0441\u0435\u0431\u0435",type:"text",className:"form__input form__profile-job",name:"description",value:p,id:"js-profile-job",required:!0,minLength:"2",maxLength:"200",onChange:function(e){m(e.target.value)}}),Object(b.jsx)("span",{className:"form__error",id:"js-profile-job-error",children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]})]})})};var w=function(e){var t=e.onAddPlace,n=e.isOpen,c=e.onClose,r=Object(a.useState)(""),o=Object(l.a)(r,2),s=o[0],i=o[1],u=Object(a.useState)(""),j=Object(l.a)(u,2),d=j[0],p=j[1];return Object(b.jsx)(S,{size:"size_l",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",popupName:"js-popup-card",formName:"js-form-card",isOpen:n,onClose:c,onSubmit:function(e){e.preventDefault(),t({name:s,link:d})},children:Object(b.jsxs)("fieldset",{className:"form__set",children:[Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text",className:"form__input form__card-name",name:"namePlace",id:"js-card-name",value:s,onChange:function(e){i(e.target.value)},required:!0,minLength:"2",maxLength:"30"}),Object(b.jsx)("span",{className:"form__error",id:"js-card-name-error",children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]}),Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",type:"url",name:"urlPlace",value:d,onChange:function(e){p(e.target.value)},className:"form__input form__card-url",id:"js-card-url",required:!0}),Object(b.jsx)("span",{className:"form__error",id:"js-card-url-error",children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]})]})})};var I=function(e){var t=e.popupName,n=e.onClose,a=e.isOpen,c=e.card,r=a?" popup_opened":"";return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("section",{className:"popup popup_theme_dark "+t+r,children:Object(b.jsx)("ul",{className:"preview",children:Object(b.jsxs)("li",{children:[Object(b.jsx)("img",{src:c.link,alt:c.name,className:"preview__image"}),Object(b.jsx)("p",{className:"preview__title",children:c.name}),Object(b.jsx)("button",{onClick:n,"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e",type:"button",className:"button button_close"})]})})})})},F=n(25),L=n(26),T="https://mesto.nomoreparties.co/v1/cohort-17/",z="26855ddc-0b32-46bf-95f9-95a4c6a68cde",A=new(function(){function e(t){Object(F.a)(this,e),this.url=t.url,this.headers=t.headers}return Object(L.a)(e,[{key:"getCards",value:function(){var e=this;return fetch("".concat(this.url,"cards"),{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a: ".concat(e.status))})).then((function(e){return e})).catch((function(t){return e._displayErr(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.url,"users/me"),{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435: ".concat(e.status))})).then((function(e){return e})).catch((function(t){return e._displayErr(t)}))}},{key:"updateUserInfo",value:function(e,t){var n=this;return fetch("".concat(this.url,"users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435: ".concat(e.status))})).then((function(e){return e})).catch((function(e){return n._displayErr(e)}))}},{key:"createNewPlace",value:function(e,t){var n=this;return fetch("".concat(this.url,"cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438: ".concat(e.status))})).then((function(e){return e})).catch((function(e){return n._displayErr(e)}))}},{key:"deleteMyPlace",value:function(e){var t=this;return fetch("".concat(this.url,"cards/").concat(e),{method:"DELETE",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 ".concat(e," \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438: ").concat(t.status))})).then((function(e){return e})).catch((function(e){return t._displayErr(e)}))}},{key:"likeCard",value:function(e,t){var n=this;return fetch("".concat(this.url,"cards/likes/").concat(e),{method:t,headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u043b\u0430\u0439\u043a\u0430\u043d\u044c\u044f ".concat(e," \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438: ").concat(t.status))})).then((function(e){return e})).catch((function(e){return n._displayErr(e)}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("".concat(this.url,"users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043c\u0435\u043d\u044b \u0430\u0432\u0430\u0442\u0430\u0440\u0430: ".concat(e.status))})).then((function(e){return e})).catch((function(e){return t._displayErr(e)}))}},{key:"_displayErr",value:function(e){alert(e)}}]),e}())({url:T,headers:{authorization:z,"Content-Type":"application/json"}});var D=Object(u.h)((function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({}),o=Object(l.a)(r,2),s=o[0],d=o[1],p=Object(a.useState)(!1),h=Object(l.a)(p,2),f=h[0],_=h[1],g=Object(a.useState)(!1),k=Object(l.a)(g,2),S=k[0],F=k[1],L=Object(a.useState)(!1),T=Object(l.a)(L,2),z=T[0],D=T[1],M=Object(a.useState)(!1),U=Object(l.a)(M,2),q=U[0],J=U[1],R=Object(a.useState)(!1),B=Object(l.a)(R,2),H=(B[0],B[1]),G=Object(a.useState)(!1),V=Object(l.a)(G,2),Y=V[0],K=V[1],Q=Object(a.useState)(!1),W=Object(l.a)(Q,2),X=W[0],Z=W[1],$=Object(a.useState)({email:""}),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),ce=Object(l.a)(ae,2),re=ce[0],oe=ce[1],se=Object(a.useState)(""),ie=Object(l.a)(se,2),le=ie[0],ue=ie[1],je=Object(a.useState)(!1),de=Object(l.a)(je,2),pe=de[0],be=de[1],me=Object(u.g)(),he=function(){_(!1),F(!1),D(!1),J(!1),H(!1)};function fe(){A.getUserInfo().then((function(e){K(e)})).catch((function(e){alert("Error:"+e)}))}function Oe(){localStorage.getItem("jwt")&&function(e){return fetch("".concat(O,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))}(localStorage.getItem("jwt")).then((function(e){e.data.email&&(Z(!0),ne({email:e.data.email}))}))}function _e(){le&&(be(!1),me.push("/signin")),be(!1)}return Object(a.useEffect)((function(){Oe(),fe(),A.getCards().then((function(e){var t=e.map((function(e){return e}));c(t)})).catch((function(e){alert("Error:"+e)}))}),[]),Object(a.useEffect)((function(){}),[]),Object(a.useEffect)((function(){X&&me.push("/")}),[X]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(j.Provider,{value:Y,children:[Object(b.jsx)(N,{loggedIn:X,location:me.location.pathname,linkUrl:"signup",linkName:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",email:te.email,onSignout:function(){localStorage.removeItem("jwt"),Z(!1),me.push("/signin")}}),Object(b.jsxs)(u.d,{children:[Object(b.jsx)(m,{exact:!0,path:"/",loggedIn:X,component:y,onEditAvatar:function(){F(!0)},onAddPlace:function(){_(!0)},onEditProfile:function(){D(!0)},onCardClick:function(e){J(!0),d(e)},cards:n,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===Y._id})),a="".concat(t?"DELETE":"PUT");A.likeCard(e._id,a).then((function(t){var a=n.map((function(n){return n._id===e._id?t:n}));c(a)})).catch((function(e){alert("Error: "+e)}))},onCardDelete:function(e){A.deleteMyPlace(e._id).then((function(t){if(!t.message)return new Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f");var a=n.filter((function(t){return t._id!==e._id}));c(a)})).catch((function(e){alert("Error: "+e)}))}}),Object(b.jsx)(u.b,{exact:!0,path:"/signup",children:Object(b.jsx)(v,{onRegister:function(e,t){return function(e,t){return fetch("".concat(O,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then((function(e){return e}))}(e,t).then((function(e){if(!e||400===e.status)throw oe("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),ue(!1),be(!0),new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438");e.ok&&(oe("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),ue(!0),be(!0))})).catch((function(e){return Promise.reject("\u043e\u0448\u0438\u0431\u043a\u0430")}))},infotooltipMessage:re,infotooltipStatus:le,isInfotooltipOpened:pe,onInfotooltipClose:_e})}),Object(b.jsx)(u.b,{exact:!0,path:"/signin",children:Object(b.jsx)(x,{onLogin:function(e,t){return function(e,t){return fetch("".concat(O,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then((function(e){return e}))}(e,t).then((function(e){if(!e||400===e.status||401===e.status)throw oe("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),ue(!1),be(!0),new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438");return e.json()})).then((function(e){Z(!0),localStorage.setItem("jwt",e.token),Oe(),me.push("/")})).catch((function(e){return Promise.reject("\u043e\u0448\u0438\u0431\u043a\u0430")}))},infotooltipMessage:re,infotooltipStatus:le,isInfotooltipOpened:pe,onInfotooltipClose:_e})}),X?Object(b.jsx)(u.a,{to:"/"}):Object(b.jsx)(u.a,{to:"/signin"}),Object(b.jsx)(C,{})]}),Object(b.jsx)(I,{popupName:"js-popup-place",onClose:he,isOpen:q,card:s}),Object(b.jsx)(E,{isOpen:S,onClose:he,onUpdateAvatar:function(e){var t=e.avatar;A.changeAvatar(t).then((function(e){K(e),he()})).catch((function(e){alert("Error: "+e)}))}}),Object(b.jsx)(w,{isOpen:f,onClose:he,onAddPlace:function(e){var t=e.name,a=e.link;A.createNewPlace(t,a).then((function(e){c([e].concat(Object(i.a)(n))),he()})).catch((function(e){alert("Error: "+e)}))}}),Object(b.jsx)(P,{isOpen:z,onClose:he,onUpdateUser:function(e){A.updateUserInfo(e.name,e.about).then((function(e){he(),fe()})).catch((function(e){alert("Error: "+e)}))}})]})})})),M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(s.a,{children:Object(b.jsx)(D,{})})}),document.getElementById("root")),M()}},[[52,1,2]]]);
//# sourceMappingURL=main.c8bc8078.chunk.js.map